<h1>üõí Catalogo Prodotti</h1>

<form method="GET" style="margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 5px;">
    <div style="display: flex; gap: 15px; align-items: end;">
        <div>
            <label for="category" style="display: block; margin-bottom: 5px;">Categoria:</label>
            <select name="category" id="category" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                <option value="">Tutte</option>
                <% categories.forEach(cat => { %>
                    <option value="<%= cat %>" <%= selectedCategory === cat ? 'selected' : '' %>>
                        <%= cat %>
                    </option>
                <% }) %>
            </select>
        </div>
        
        <div>
            <label style="display: flex; align-items: center;">
                <input 
                    type="checkbox" 
                    name="available" 
                    value="true"
                    <%= showOnlyAvailable ? 'checked' : '' %>
                    style="margin-right: 5px;"
                >
                Solo disponibili
            </label>
        </div>
        
        <button type="submit" style="padding: 8px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">
            üîç Filtra
        </button>
    </div>
</form>

<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px;">
    <% products.forEach(product => { %>
        <div style="border: 1px solid #ddd; border-radius: 8px; padding: 20px; <%= product.stock === 0 ? 'opacity: 0.6;' : '' %>">
            <h3 style="margin-bottom: 10px;"><%= product.name %></h3>
            
            <p style="color: #666; margin-bottom: 10px;">
                <small><%= product.category %></small>
            </p>
            
            <p style="font-size: 24px; font-weight: bold; color: #28a745; margin-bottom: 10px;">
                <%= formatPrice(product.price) %>
            </p>
            
            <p style="margin-bottom: 15px;">
                <% if (product.stock > 0) { %>
                    <span style="color: #28a745;">‚úì Disponibile (<%= product.stock %> pz)</span>
                <% } else { %>
                    <span style="color: #dc3545;">‚úó Esaurito</span>
                <% } %>
            </p>
            
            <button 
                style="width: 100%; padding: 10px; background: <%= product.stock > 0 ? '#007bff' : '#6c757d' %>; color: white; border: none; border-radius: 4px; cursor: <%= product.stock > 0 ? 'pointer' : 'not-allowed' %>;"
                <%= product.stock === 0 ? 'disabled' : '' %>
            >
                üõí Aggiungi al carrello
            </button>
        </div>
    <% }) %>
</div>

<% if (products.length === 0) { %>
    <p style="text-align: center; margin-top: 40px; color: #666;">
        Nessun prodotto trovato con i filtri selezionati.
    </p>
<% } %>
