<h1>ğŸ“ <%= user ? 'Modifica' : 'Nuovo' %> Utente</h1>

<% if (errors.length > 0) { %>
    <div class="alert alert-error">
        <strong>Errori di validazione:</strong>
        <ul style="margin-top: 10px;">
            <% errors.forEach(error => { %>
                <li><%= error %></li>
            <% }) %>
        </ul>
    </div>
<% } %>

<form method="POST" action="/users" style="max-width: 600px; margin-top: 20px;">
    <div style="margin-bottom: 20px;">
        <label for="name" style="display: block; margin-bottom: 5px; font-weight: bold;">Nome:</label>
        <input 
            type="text" 
            id="name" 
            name="name" 
            value="<%= user ? user.name : '' %>"
            style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"
            required
        >
    </div>

    <div style="margin-bottom: 20px;">
        <label for="email" style="display: block; margin-bottom: 5px; font-weight: bold;">Email:</label>
        <input 
            type="email" 
            id="email" 
            name="email" 
            value="<%= user ? user.email : '' %>"
            style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"
            required
        >
    </div>

    <div style="margin-bottom: 20px;">
        <label for="role" style="display: block; margin-bottom: 5px; font-weight: bold;">Ruolo:</label>
        <select 
            id="role" 
            name="role"
            style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"
        >
            <option value="user" <%= user && user.role === 'user' ? 'selected' : '' %>>User</option>
            <option value="admin" <%= user && user.role === 'admin' ? 'selected' : '' %>>Admin</option>
        </select>
    </div>

    <div style="margin-bottom: 20px;">
        <label style="display: flex; align-items: center; cursor: pointer;">
            <input 
                type="checkbox" 
                name="active"
                <%= user && user.active ? 'checked' : '' %>
                style="margin-right: 8px;"
            >
            <span>Utente attivo</span>
        </label>
    </div>

    <div>
        <button 
            type="submit"
            style="padding: 10px 20px; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer; margin-right: 10px;"
        >
            ğŸ’¾ Salva
        </button>
        <a 
            href="/users"
            style="display: inline-block; padding: 10px 20px; background: #6c757d; color: white; text-decoration: none; border-radius: 4px;"
        >
            Annulla
        </a>
    </div>
</form>
